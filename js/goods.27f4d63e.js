(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["goods"],{1265:function(t,e,s){"use strict";var n=s("531e"),o=s.n(n);o.a},"1a59":function(t,e,s){},"1f9e":function(t,e,s){},"2e08":function(t,e,s){var n=s("9def"),o=s("9744"),a=s("be13");t.exports=function(t,e,s,i){var r=String(a(t)),c=r.length,l=void 0===s?" ":String(s),d=n(e);if(d<=c||""==l)return r;var u=d-c,f=o.call(l,Math.ceil(u/l.length));return f.length>u&&(f=f.slice(0,u)),i?f+r:r+f}},"36f4":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"ratingselect"},[s("div",{staticClass:"rating-type"},[s("span",{staticClass:"block positive",class:{active:2===t.selectType},on:{click:function(e){return t.select(2,e)}}},[t._v("\n            "+t._s(t.desc.all)+"\n            "),s("span",{staticClass:"count"},[t._v("\n                "+t._s(t.ratings.length)+"\n            ")])]),s("span",{staticClass:"block positive",class:{active:0===t.selectType},on:{click:function(e){return t.select(0,e)}}},[t._v("\n            "+t._s(t.desc.positive)+"\n            "),s("span",{staticClass:"count"},[t._v("\n                "+t._s(t.positives.length)+"\n            ")])]),s("span",{staticClass:"block negative",class:{active:1===t.selectType},on:{click:function(e){return t.select(1,e)}}},[t._v("\n            "+t._s(t.desc.negative)+"\n            "),s("span",{staticClass:"count"},[t._v("\n                "+t._s(t.negatives.length)+"\n            ")])])]),s("div",{staticClass:"switch",class:{on:t.onlyContent},on:{click:t.toggleContent}},[s("span",{staticClass:"icon-check_circle"}),s("span",{staticClass:"text"},[t._v("只看有内容的评价")])])])},o=[],a=(s("c5f6"),0),i=1,r=2,c={name:"ratingselect",data:function(){return{}},props:{ratings:{type:Array,default:function(){return[]}},selectType:{type:Number,default:r},onlyContent:{type:Boolean,default:!1},desc:{type:Object,default:function(){return{all:"全部",positive:"满意",negative:"不满意"}}}},methods:{select:function(t){this.$parent.selectType=t},toggleContent:function(){this.$parent.onlyContent=!this.$parent.onlyContent}},computed:{positives:function(){return this.ratings.filter((function(t){return t.rateType===a}))},negatives:function(){return this.ratings.filter((function(t){return t.rateType===i}))}}},l=c,d=(s("4985"),s("2877")),u=Object(d["a"])(l,n,o,!1,null,"0675b925",null);e["a"]=u.exports},"3ae4":function(t,e,s){},"3b2b":function(t,e,s){var n=s("7726"),o=s("5dbc"),a=s("86cc").f,i=s("9093").f,r=s("aae3"),c=s("0bfb"),l=n.RegExp,d=l,u=l.prototype,f=/a/g,h=/a/g,p=new l(f)!==f;if(s("9e1e")&&(!p||s("79e5")((function(){return h[s("2b4c")("match")]=!1,l(f)!=f||l(h)==h||"/a/i"!=l(f,"i")})))){l=function(t,e){var s=this instanceof l,n=r(t),a=void 0===e;return!s&&n&&t.constructor===l&&a?t:o(p?new d(n&&!a?t.source:t,e):d((n=t instanceof l)?t.source:t,n&&a?c.call(t):e),s?this:u,l)};for(var v=function(t){t in l||a(l,t,{configurable:!0,get:function(){return d[t]},set:function(e){d[t]=e}})},g=i(d),C=0;g.length>C;)v(g[C++]);u.constructor=l,l.prototype=u,s("2aba")(n,"RegExp",l)}s("7a56")("RegExp")},"3c54":function(t,e,s){"use strict";var n=s("1a59"),o=s.n(n);o.a},4985:function(t,e,s){"use strict";var n=s("b0f0"),o=s.n(n);o.a},"531e":function(t,e,s){},"58b2":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"goods"},[s("div",{ref:"menuWrapper",staticClass:"menu-wrapper"},[s("ul",t._l(t.goods,(function(e,n){return s("li",{key:n,staticClass:"menu-item",class:{current:t.currentIndex===n},on:{click:function(e){return t.selectMenu(n,e)}}},[s("span",{staticClass:"text border-1px"},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.type>0,expression:"item.type>0"}],staticClass:"icon",class:t.classMap[e.type]}),t._v("\n                    "+t._s(e.name)+"\n                ")])])})),0)]),s("div",{ref:"foodsWrapper",staticClass:"foods-wrapper"},[s("ul",t._l(t.goods,(function(e,n){return s("li",{key:n,ref:"foodsList",refInFor:!0,staticClass:"food-list food-list-hook"},[s("h1",{staticClass:"title"},[t._v(t._s(e.name))]),s("ul",t._l(e.foods,(function(e,n){return s("li",{key:n,staticClass:"food-item border-1px",on:{click:function(s){return t.selectFood(e,s)}}},[s("div",{staticClass:"icon"},[s("img",{attrs:{src:e.icon}})]),s("div",{staticClass:"content"},[s("h2",{staticClass:"name"},[t._v(t._s(e.name))]),s("p",{staticClass:"desc"},[t._v("\n                                "+t._s(e.description)+"\n                            ")]),s("div",{staticClass:"extra"},[s("span",{staticClass:"count"},[t._v("\n                                    月售"+t._s(e.sellCount)+"份\n                                ")]),s("span",[t._v("\n                                    好评率"+t._s(e.rating)+"%\n                                ")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("\n                                    ￥"+t._s(e.price)+"\n                                ")]),s("span",{directives:[{name:"show",rawName:"v-show",value:e.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("\n                                    ￥"+t._s(e.oldPrice)+"\n                                ")])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("cartcontrol",{attrs:{food:e},on:{cartAdd:t.cartAddFn}})],1)])])})),0)])})),0)]),s("shopcart",{ref:"shopCart",attrs:{"delivery-price":t.seller.deliveryPrice,"min-price":t.seller.minPrice,"select-foods":t.selectFoods},on:{shopcartReturnFold:t.shopcartReturnFoldFn}}),s("shopcart-mask",{ref:"shopCartMask",on:{shopcartReturnTrue:t.shopcartReturnTrueFn}}),s("food",{ref:"food",attrs:{food:t.selectedFood},on:{foodCartAdd:t.cartAddFn}})],1)},o=[],a=(s("ac6a"),s("1fba")),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shopcart"},[s("div",{staticClass:"content",on:{click:t.toggleList}},[s("div",{staticClass:"content-left"},[s("div",{staticClass:"logo-wrapper"},[s("div",{staticClass:"logo",class:{highlight:t.totalCount}},[s("i",{staticClass:"icon-shopping_cart"})]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.totalCount,expression:"totalCount"}],staticClass:"num"},[t._v(t._s(t.totalCount))])]),s("div",{staticClass:"price",class:{highlight:t.totalPrice}},[t._v("￥"+t._s(t.totalPrice))]),s("div",{staticClass:"desc"},[t._v("另需配送费"+t._s(t.deliveryPrice)+"元")])]),s("div",{staticClass:"content-right",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.pay(e)}}},[s("div",{staticClass:"pay",class:t.payClass},[t._v(t._s(t.payDesc))])])]),s("div",{staticClass:"ball-container"},t._l(t.balls,(function(e,n){return s("transition",{key:n,attrs:{name:"drop"},on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter,"enter-cancelled":t.enterCancelled,"before-leave":t.beforeLeave,leave:t.leave,"after-leave":t.afterLeave,"leave-cancelled":t.leaveCancelled}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"ball.show"}],staticClass:"ball ^.^"},[s("div",{staticClass:"inner inner-hook"})])])})),1),s("transition",{attrs:{name:"fold"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.listShow,expression:"listShow"}],staticClass:"shopcart-list"},[s("div",{staticClass:"list-header"},[s("h1",{staticClass:"title"},[t._v("购物车")]),s("span",{staticClass:"empty",on:{click:t.empty}},[t._v("\n                    清空\n                ")])]),s("div",{ref:"list-content",staticClass:"list-content"},[s("ul",t._l(t.selectFoods,(function(e,n){return s("li",{key:n,staticClass:"food border-1px"},[s("span",{staticClass:"name"},[t._v(t._s(e.name))]),s("div",{staticClass:"price"},[s("span",[t._v("\n                                ￥"+t._s(e.price*e.count)+"\n                            ")])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("cartcontrol",{attrs:{food:e}})],1)])})),0)])])])],1)},r=[],c=(s("c5f6"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cartcontrol",on:{click:function(t){t.stopPropagation()}}},[s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-decrease\n        icon-remove_circle_outline",attrs:{transition:"move"},on:{click:function(e){return e.stopPropagation(),t.decreaseCart(e)}}},[s("div",{staticClass:"inner "})])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.count>0,expression:"food.count>0"}],staticClass:"cart-count"},[t._v("\n        "+t._s(t.food.count)+"\n    ")]),s("div",{staticClass:"cart-add\n    icon-add_circle",on:{click:function(e){return e.stopPropagation(),t.addCart(e)}}})],1)}),l=[],d=s("2b0e"),u={props:{food:{type:Object}},methods:{addCart:function(t){this.food.count?this.food.count++:d["a"].set(this.food,"count",1),this.$emit("cartAdd",t.target)},decreaseCart:function(){this.food.count&&this.food.count--}}},f=u,h=(s("76de"),s("2877")),p=Object(h["a"])(f,c,l,!1,null,"91bbe5c4",null),v=p.exports,g={data:function(){return{balls:[{show:!1},{show:!1},{show:!1},{show:!1},{show:!1}],dropBalls:[],fold:!0}},props:{selectFoods:{type:Array,default:function(){return[{price:0,count:0,name:"error"}]}},deliveryPrice:{type:Number,default:0,validator:function(t){return t>=0},required:!0},minPrice:{type:Number,default:20}},computed:{totalPrice:function(){var t=0;return this.selectFoods.forEach((function(e,s){t+=e.price*e.count})),t},totalCount:function(){var t=0;return this.selectFoods.forEach((function(e,s){t+=e.count})),t},payDesc:function(){return 0===this.totalPrice?"￥".concat(this.minPrice,"元起送"):this.totalPrice<this.minPrice&&this.totalPrice>0?"还差 ".concat(this.minPrice-this.totalPrice,"元起送"):"去结算"},payClass:function(){if(this.totalPrice>=this.minPrice)return"enough"},listShow:function(){var t=this;if(!this.totalCount)return this.fold=!0,this.$emit("shopcartReturnFold",this.fold),!1;var e=!this.fold;return e&&this.$nextTick((function(){t.scroll?t.scroll.refresh():t.scroll=new a["a"](t.$refs["list-content"],{click:!0})})),this.$emit("shopcartReturnFold",this.fold),e}},methods:{drop:function(t){for(var e=0;e<this.balls.length;e++){var s=this.balls[e];if(!s.show)return s.show=!0,s.target=t,void this.dropBalls.push(s)}},toggleList:function(){this.totalCount&&(this.fold=!this.fold)},pay:function(){this.totalPrice<this.minPrice||window.alert("支付".concat(this.totalPrice,"元"))},empty:function(){this.selectFoods.forEach((function(t,e){t.count=0}))},beforeEnter:function(t){var e=this.balls.length;while(e--){var s=this.balls[e];if(s.show){var n=s.target.getBoundingClientRect(),o=n.left-32,a=-(window.innerHeight-n.top-22);t.style.display="",t.style.transform="translate3d(0,".concat(a,"px,0)");var i=t.getElementsByClassName("inner-hook")[0];i.style.transform="translate3d(".concat(o,"px,0,0)")}}},enter:function(t){t.offsetHeight;this.$nextTick((function(){t.style.display="",t.style.transform="translate3d(0,0,0)";var e=t.getElementsByClassName("inner-hook")[0];e.style.transform="translate3d(0,0,0)"}))},afterEnter:function(t){var e=this.dropBalls.shift();e&&(e.show=!1,t.style.display="none")},enterCancelled:function(){},beforeLeave:function(){},leave:function(){},afterLeave:function(){},leaveCancelled:function(){}},components:{cartcontrol:v}},C=g,m=(s("3c54"),Object(h["a"])(C,i,r,!1,null,"6457ae37",null)),w=m.exports,_=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.hideList,expression:"hideList"}],staticClass:"list-mask",on:{click:t.shopcartMaskClick}})])},y=[],b={data:function(){return{hideList:!1}},methods:{shopcartMaskClick:function(){this.$emit("shopcartReturnTrue")}}},x=b,k=(s("1265"),Object(h["a"])(x,_,y,!1,null,"89401d30",null)),F=k.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"move"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],ref:"food",staticClass:"food"},[s("div",{staticClass:"food-content"},[s("div",{staticClass:"image-header"},[s("img",{attrs:{src:t.food.image}}),s("div",{staticClass:"back",on:{click:t.hide}},[s("i",{staticClass:"icon-arrow_lift"})])]),s("div",{staticClass:"content"},[s("h1",{staticClass:"title"},[t._v("\n                    "+t._s(t.food.name)+"\n                ")]),s("div",{staticClass:"detail"},[s("span",{staticClass:"sell-count"},[t._v("\n                        月售"+t._s(t.food.sellCount)+"份\n                    ")]),s("span",{staticClass:"rating"},[t._v("\n                        好评率"+t._s(t.food.rating)+"%\n                    ")])]),s("div",{staticClass:"price"},[s("span",{staticClass:"now"},[t._v("\n                        ￥"+t._s(t.food.price)+"\n                    ")]),s("span",{directives:[{name:"show",rawName:"v-show",value:t.food.oldPrice,expression:"food.oldPrice"}],staticClass:"old"},[t._v("\n                        ￥"+t._s(t.food.oldPrice)+"\n                    ")])]),s("div",{staticClass:"cartcontrol-wrapper"},[s("cartcontrol",{attrs:{food:t.food},on:{cartAdd:t.addParentFn}})],1),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.count||0===t.food.count,expression:"!food.count || food.count===0"}],staticClass:"buy",on:{click:function(e){return e.stopPropagation(),t.addFirst(e)}}},[t._v("\n                        加入购物车\n                    ")])])],1),s("split",{directives:[{name:"show",rawName:"v-show",value:t.food.info,expression:"food.info"}]}),s("div",{directives:[{name:"show",rawName:"v-show",value:t.food.info,expression:"food.info"}],staticClass:"info"},[s("h1",{staticClass:"title"},[t._v("商品信息")]),s("p",{staticClass:"text"},[t._v("\n                    "+t._s(t.food.info)+"\n                ")])]),s("split"),s("div",{staticClass:"rating"},[s("h1",{staticClass:"title"},[t._v("商品评价")]),s("ratingselect",{attrs:{selectType:t.selectType,onlyContent:t.onlyContent,desc:t.desc,ratings:t.food.ratings}}),s("div",{staticClass:"rating-wrapper"},[s("ul",{directives:[{name:"show",rawName:"v-show",value:t.food.ratings&&t.food.ratings.length,expression:"food.ratings && food.ratings.length"}]},t._l(t.food.ratings,(function(e,n){return s("li",{directives:[{name:"show",rawName:"v-show",value:t.needShow(e.rateType,e.text),expression:"needShow(rating.rateType,rating.text)"}],key:n,staticClass:"rating-item"},[s("div",{staticClass:"user"},[s("span",{staticClass:"name"},[t._v("\n                                    "+t._s(e.username)+"\n                                ")]),s("img",{staticClass:"avatar",attrs:{src:e.avatar}})]),s("div",{staticClass:"time"},[t._v("\n                                "+t._s(t._f("formatDate")(e.rateTime))+"\n                            ")]),s("p",{staticClass:"text"},[s("span",{class:{"icon-thumb_up":0===e.rateType,"icon-thumb_down":1===e.rateType}}),t._v("\n                                "+t._s(e.text)+"\n                            ")])])})),0),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.food.ratings||!t.food.ratings.length,expression:"!food.ratings||!food.ratings.length"}],staticClass:"no-rating"},[t._v("\n                        暂无评价\n                    ")])])],1)],1)])])},$=[],T=s("dda2"),E=s("36f4"),N=s("8c91"),M=2,S={props:{food:{type:Object}},data:function(){return{showFlag:!1,selectType:M,onlyContent:!1,desc:{all:"全部",positive:"推荐",negative:"吐槽"}}},methods:{show:function(){var t=this;this.showFlag=!0,this.selectType=M,this.onlyContent=!1,this.$nextTick((function(){t.scroll?t.scroll.refresh():t.scroll=new a["a"](t.$refs.food,{click:!0})}))},hide:function(){this.showFlag=!1},addFirst:function(t){d["a"].set(this.food,"count",1),this.$emit("cartAdd",t.target),this.$emit("foodCartAdd",t.target)},addParentFn:function(t){this.$emit("foodCartAdd",t)},needShow:function(t,e){return!(this.onlyContent&&!e)&&(this.selectType===M||t===this.selectType)}},components:{cartcontrol:v,split:T["a"],ratingselect:E["a"]},filters:{formatDate:function(t){var e=new Date(t);return Object(N["a"])(e,"yyyy-MM-dd hh:mm")}}},R=S,A=(s("c5b7"),Object(h["a"])(R,P,$,!1,null,"087a8df8",null)),L=A.exports,j={props:{seller:{type:Object},goods:{type:Array}},data:function(){return{listHeight:[0,1022,1174,1295,1603,1817,2049,2359,2854,3539],scrollY:0,foodList:[],selectedFood:{},classMap:[]}},mounted:function(){var t=this;this.classMap=["decrease","discount","special","invoice","guarantee"],this.$nextTick((function(){t._initScroll()}))},methods:{_initScroll:function(){var t=this;this.menuScroll=new a["a"](this.$refs.menuWrapper,{click:!0}),this.foodsScroll=new a["a"](this.$refs.foodsWrapper,{click:!0,probeType:3}),this.foodsScroll.on("scroll",(function(e){Math.round(e.y)>0?t.scrollY=0:t.scrollY=-Math.round(e.y)}))},_calculateHeight:function(){},selectMenu:function(t,e){this.foodsScroll.scrollTo(0,-this.listHeight[t],300)},cartAddFn:function(t){var e=this;this.$nextTick((function(){e.$refs.shopCart.drop(t)}))},shopcartReturnFoldFn:function(t){this.$refs.shopCartMask&&(this.$refs.shopCartMask.hideList=!t)},shopcartReturnTrueFn:function(){this.$refs.shopCart.fold=!0},selectFood:function(t,e){this.selectedFood=t,this.$refs.food.show()}},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],s=this.listHeight[t+1];if(!s||this.scrollY>=e&&this.scrollY<s)return t}return 0},selectFoods:function(){var t=[];return this.goods.forEach((function(e,s){e.foods.forEach((function(e,s){e.count&&t.push(e)}))})),t}},components:{shopcart:w,cartcontrol:v,shopcartMask:F,food:L}},O=j,H=(s("b29e"),Object(h["a"])(O,n,o,!1,null,"29ed1ea8",null));e["default"]=H.exports},"76de":function(t,e,s){"use strict";var n=s("3ae4"),o=s.n(n);o.a},"8c91":function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));s("f576"),s("3b2b"),s("a481");function n(t,e){/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var s={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var n in s)if(new RegExp("(".concat(n,")")).test(e)){var o=s[n]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?o:o.padStart(o.length,"0"))}return e}},9744:function(t,e,s){"use strict";var n=s("4588"),o=s("be13");t.exports=function(t){var e=String(o(this)),s="",a=n(t);if(a<0||a==1/0)throw RangeError("Count can't be negative");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(s+=e);return s}},b0f0:function(t,e,s){},b29e:function(t,e,s){"use strict";var n=s("1f9e"),o=s.n(n);o.a},c417:function(t,e,s){},c5b7:function(t,e,s){"use strict";var n=s("c417"),o=s.n(n);o.a},f576:function(t,e,s){"use strict";var n=s("5ca1"),o=s("2e08"),a=s("a25f"),i=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a);n(n.P+n.F*i,"String",{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0,!0)}})}}]);